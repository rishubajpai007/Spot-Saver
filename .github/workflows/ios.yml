name: iOS CI

on:
  push:
    branches: [ main ]
  pull_request:

jobs:
  build-test:
    runs-on: macos-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Xcode
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: latest-stable

    # Optional: You can keep this if you might use CocoaPods later, 
    # otherwise it does nothing if you don't have a Podfile.
    - name: Install dependencies
      run: |
        if [ -f Podfile ]; then pod install; fi

    - name: Build & Test
      run: |
        xcodebuild \
        -project "Spot Saver.xcodeproj" \
        -scheme "Spot Saver" \
        -destination 'platform=iOS Simulator,name=iPhone 16' \
        clean test
